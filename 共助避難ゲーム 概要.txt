共助避難ゲーム 概要
【ゲーム概要】
本ゲームは、水害発生時の避難行動を題材とした Unity 製の避難体験ゲームである。
プレイヤーはマップ内を移動しながら情報収集や判断を行い、制限時間内に安全地帯（避難所）へ到達することを目的とする。
ゲーム進行は「警戒レベル」によって表現され、時間経過に応じて警戒レベルが上昇する。
警戒レベルが上がるにつれて、画面演出やゲーム内制約が強化され、状況が切迫していくことをプレイヤーに伝える。

制限時間終了時点でプレイヤーが安全地帯にいる場合はゲームクリア、
そうでない場合はゲームオーバーとなり、リザルトを表示する。

最後の30秒（警戒レベル5）は共助行動を諦め、
自身が避難所へ到達できるかどうかに集中する最終局面として扱う。

【操作】
移動：方向キーまたは WASD（Input.GetAxisRaw）
ダッシュ：Space 押しっぱなしで移動速度アップ
キャラに話しかける：F
マップ表示切り替え：E

【マップ構成に関する前提】
マップ中央付近には川が存在し、マップを横方向に三分割した場合、
左側ゾーンへ移動するには橋を渡る必要がある。
避難所はマップ右上に配置されている。

警戒レベルが一定以上に達した場合、川の左側ゾーンへは移動できなくなり、
避難所へ向かうルートが制限される。

【時間・警戒レベル管理（TimerController）】
・制限時間は 300 秒（5 分）
・経過時間および残り時間を管理
・警戒レベルは時間経過から算出
・警戒レベル境界時間は levelStartTimes（デフォルト 0/60/120/210/270 秒）
・警戒レベルが変化した瞬間に OnAlertLevelChanged(prevLevel, nextLevel) を発火
・残り時間が 0 になった時点で GameManager に通知
・autoStart により自動開始可能

【ゲーム状態管理（GameManager）】
・ゲーム状態として Playing / Clear / GameOver を管理
・時間切れや条件達成時に状態を確定
・Clear / GameOver 処理が二重に実行されないよう制御
・SafeZone タグのコライダー接触で「安全地帯内」を判定
・ScoreManager のスコアをゲーム開始時にリセット

【警戒レベルごとの演出変化（AlertLevelEffects）】
・Lv1：演出なし（文字色は白）
・Lv2：警戒レベル表示の文字色を黄色系に変更
・Lv3：警戒レベル表示をオレンジ色に変更し、弱いビネットを適用
・Lv4：警戒レベル表示を赤色に変更し、赤いビネットを適用
・Lv5：画面全体を点滅させ、最終局面であることを強調

【タイマーおよび警戒レベルUI表示（TimerUI）】
・TextMeshPro を使用して残り時間を mm:ss 形式で表示
・現在の警戒レベルを同時に表示（"Lv.X"）
・TimerController から受け取った情報のみを表示し、時間計算は行わない

【川の一方通行封鎖（OneWayGateController）】
・警戒レベル4到達でゲートを有効化
・プレイヤーが「左へ移動中」のときだけゲートを閉鎖（isTrigger=false）
・右方向への移動時は通行可（isTrigger=true）
・左側ゾーンに居たプレイヤーは右側へ戻れるが、再侵入は不可
・ゲートは複数コライダー（最大4）に対応

【キャラクター・共助システム】
■ CharaData（ScriptableObject）
・ID、名前、顔/全身アイコン、プロフィール、共助の説明文、配慮度、共助スコア
・車いす利用者かどうか（isWheelchairUser）

■ CharaManager
・ゲーム開始時にキャラをランダム配置
・SpawnPoint とキャラデータの対応を管理
・インタラクション用テキスト（InteractionText）を参照
・ProfileUI やミニマップ用に、データと実体を辞書で保持

■ Chara
・プレイヤーが近づくとボタン案内を表示（Fで話しかけ）
・車いす利用者：確認メッセージ後、2回目の F で「運ぶ」
・非車いす利用者：呼びかけで吹き出し表示、共助スコア加算（1回のみ）
・プレイヤーが運んで安全地帯に到達した場合、キャラを出現させてスコア加算

■ PlayerController
・移動、ダッシュ、キャラとのやり取り、運搬状態の管理
・安全地帯内で運搬キャラをドロップ

【UI・マップ機能】
■ ProfileUIManager
・キャラの顔/全身アイコン、名前、プロフィール、共助説明を表示
・ミニマップ上のキャラ位置を更新

■ PlayerMapIcon
・ミニマップ上にプレイヤーと NPC アイコンを表示
・現在選択中のキャラはアイコンを拡大表示

■ MapButton
・E キーでマップキャンバス表示/非表示を切り替え
・表示時にプロフィールUIをリセットして最新化

■ ProfileButton
・プロフィールUIの「次へ/前へ」ボタンでキャラ切り替え

■ UIHoverScale
・UIボタンのホバー時拡大アニメーション

【スコア・リザルト・シーン遷移】
■ ScoreManager
・総スコアを管理（DontDestroyOnLoad）
・スコア加算・リセット

■ ResultScoreUI
・リザルト画面で総スコアを表示

■ ResultSceneLoader
・クリア/ゲームオーバーに応じたリザルトシーンへ遷移

■ GameSceneLoader（GameSceneManager.cs 内）
・任意シーンの読み込み、リロード、ゲーム終了
・遅延読み込みと Time.timeScale の復元に対応

【設計方針】
・時間進行、状態管理、UI表示、地形制御はそれぞれ別スクリプトで責務を分離
・警戒レベルは加算方式ではなく、常に時間から算出する
・Lv5は「行動制限」ではなく「精神的に追い込む演出フェーズ」として扱う
・スクリプトは1個ずつ実装する。codex自身がスクリプトを作成するのではなく、
  コマンドラインにコードの中身を出力する。ファイルの作成は自分で行い、
  出力されたコードをコピペする
